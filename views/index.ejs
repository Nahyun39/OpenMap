<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/stylesheets/main.css" />
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=<%=apikey%>&libraries=services,clusterer,drawing"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <style>
    .wrap {position: absolute;left: 0;bottom: 40px;width: 360px;height: 362px;margin-left: -180px;text-align: left;overflow: hidden;font-size: 12px;font-family: 'Malgun Gothic', dotum, '돋움', sans-serif;line-height: 1.5;}
    .wrap * {padding: 0;margin: 0;}
    .wrap .info {width: 360px;height: 350px;border-radius: 5px;border-bottom: 2px solid #ccc;border-right: 1px solid #ccc;overflow: hidden;background: #fff;}
    .wrap .info:nth-child(1) {border: 0;box-shadow: 0px 1px 2px #888;}
    .info .title {padding: 5px 0 0 10px;height: 30px;background: #eee;border-bottom: 1px solid #ddd;font-size: 18px;font-weight: bold;}
    .info .close {position: absolute;top: 10px;right: 10px;color: #888;width: 17px;height: 17px;background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/overlay_close.png');}
    .info .close:hover {cursor: pointer;}
    .info .body {position: relative;overflow: hidden;}
    .info .desc {position: relative;margin: 13px 0 0 90px;height: 75px;}
    .desc .ellipsis {overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}
    .desc .jibun {font-size: 11px;color: #888;margin-top: -2px;}
    .info .img {position: absolute;top: 6px;left: 5px;width: 73px;height: 71px;border: 1px solid #ddd;color: #888;overflow: hidden;}
    .info:after {content: '';position: absolute;margin-left: -12px;left: 50%;bottom: 0;width: 22px;height: 12px;background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/vertex_white.png')}
    .info .link {color: #5085BB;}
  </style>
  <body>
    <div id="map" style="width: 100%; height: 100%; position: fixed;"></div>
      <div id="slideNav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <div class="option">
          <div>
            <form onsubmit="searchPlaces(); return false;">
              검색어를 입력하세요
              <input type="text" id="keyword" size="15"> 
              <button type="submit">검색하기</button> 
            </form>
          </div>
        </div>
        <hr>
        <ul id="placesList"></ul>
      </div>
    </div>
  </body>
  <script>
    let closedRestaurant = []; // 오늘 마감 식당 객체를 가지고 있을 배열입니다
    let closedCafe = []; // 오늘 마감 휴게음식점 객체를 가지고 있을 배열입니다
    let closedHospital = []; // 오늘 마감 병원 객체를 가지고 있을 배열입니다
    let todayClosedRestaurant = []; // 오늘 휴무 식당 객체를 가지고 있을 배열입니다
    let todayClosedCafe = []; // 오늘 휴무 휴게음식점 객체를 가지고 있을 배열입니다
    let todayClosedHospital = []; // 오늘 휴무 병원 객체를 가지고 있을 배열입니다
    let openedRestaurant = []; // 영업중인 식당 객체를 가지고 있을 배열입니다
    let openedCafe = []; // 영업중인 휴게음식점 객체를 가지고 있을 배열입니다
    let openedHospital = []; // 영업중인 병원 객체를 가지고 있을 배열입니다
  </script>
  <% const day = new Date().getDay(); %>
  <% closedRestaurantTotal.forEach(r => { %>
    <script>
      closedRestaurantObject = {
        compName:'<%= r.dataValues.compName %>',
        address: '<%= r.dataValues.address %>',
        latitude: '<%= r.dataValues.latitude %>',
        longitude: '<%= r.dataValues.longitude %>',
        tel: '<%= r.dataValues.tel %>',
        restOpen: '<%= r.dataValues.restOpen %>',
        restClosed: '<%= r.dataValues.restClosed %>',
        breakStart: '<%= r.dataValues.breakStart %>',
        breakEnd: '<%= r.dataValues.breakEnd %>',
        image: '<%= r.dataValues.image %>',
        type: 'cr'
      };
      closedRestaurant.push(closedRestaurantObject);
    </script>
  <% }); %>
  <% closedCafeTotal.forEach(c => { %>
    <script>
      closedCafeObject = {
        compName:'<%= c.dataValues.compName %>',
        address: '<%= c.dataValues.address %>',
        latitude: '<%= c.dataValues.latitude %>',
        longitude: '<%= c.dataValues.longitude %>',
        tel: '<%= c.dataValues.tel %>',
        cafeOpen: '<%= c.dataValues.cafeOpen %>',
        cafeClosed: '<%= c.dataValues.cafeClosed %>',
        cafeType: '<%= c.dataValues.cafeType %>',
        image: '<%= c.dataValues.image %>',
        type: 'cc'
      };
      closedCafe.push(closedCafeObject);
    </script>
  <% }); %>
  <% if(day == 0){closedHospitalTotal.forEach(h => { %>
    <script>
      closedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenSun %>',
        hospitalClosed: '<%= h.dataValues.HospCloseSun %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'ch'
      };
      closedHospital.push(closedHospitalObject);
    </script>
  <% })}else if(day == 1){closedHospitalTotal.forEach(h => { %>
    <script>
      closedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenMon %>',
        hospitalClosed: '<%= h.dataValues.HospCloseMon %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'ch'
      };
      closedHospital.push(closedHospitalObject);
    </script>
  <% })}else if(day == 2){closedHospitalTotal.forEach(h => { %>
    <script>
      closedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenTue %>',
        hospitalClosed: '<%= h.dataValues.HospCloseTue %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'ch'
      };
      closedHospital.push(closedHospitalObject);
    </script>
  <% })}else if(day == 3){closedHospitalTotal.forEach(h => { %>
    <script>
      closedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenWed %>',
        hospitalClosed: '<%= h.dataValues.HospCloseWed %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'ch'
      };
      closedHospital.push(closedHospitalObject);
    </script>
  <% })}else if(day == 4){closedHospitalTotal.forEach(h => { %>
    <script>
      closedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenThu %>',
        hospitalClosed: '<%= h.dataValues.HospCloseThu %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'ch'
      };
      closedHospital.push(closedHospitalObject);
    </script>
  <% })}else if(day == 5){closedHospitalTotal.forEach(h => { %>
    <script>
      closedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenFri %>',
        hospitalClosed: '<%= h.dataValues.HospCloseFri %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'ch'
      };
      closedHospital.push(closedHospitalObject);
    </script>
  <% })}else if(day == 6){closedHospitalTotal.forEach(h => { %>
    <script>
      closedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenSat %>',
        hospitalClosed: '<%= h.dataValues.HospCloseSat %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'ch'
      };
      closedHospital.push(closedHospitalObject);
    </script>
  <% })}; %>
  <% todayClosedRestaurant.forEach(r => { %>
    <script>
      todayClosedRestaurantObject = {
        compName:'<%= r.dataValues.compName %>',
        address: '<%= r.dataValues.address %>',
        latitude: '<%= r.dataValues.latitude %>',
        longitude: '<%= r.dataValues.longitude %>',
        tel: '<%= r.dataValues.tel %>',
        image: '<%= r.dataValues.image %>',
        type: 'tcr'
      };
      todayClosedRestaurant.push(todayClosedRestaurantObject);
    </script>
  <% }); %>
  <% todayClosedCafe.forEach(c => { %>
    <script>
      todayClosedCafeObject = {
        compName:'<%= c.dataValues.compName %>',
        address: '<%= c.dataValues.address %>',
        latitude: '<%= c.dataValues.latitude %>',
        longitude: '<%= c.dataValues.longitude %>',
        tel: '<%= c.dataValues.tel %>',
        cafeType: '<%= c.dataValues.cafeType %>',
        image: '<%= c.dataValues.image %>',
        type: 'tcc'
      };
      todayClosedCafe.push(todayClosedCafeObject);
    </script>
  <% }); %>
  <% todayClosedHospital.forEach(h => { %>
    <script>
      todayClosedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'tch'
      };
      todayClosedHospital.push(todayClosedHospitalObject);
    </script>
  <% }); %>
  <% openedRestaurant.forEach(r => { %>
    <script>
      openedRestaurantObject = {
        compName:'<%= r.dataValues.compName %>',
        address: '<%= r.dataValues.address %>',
        latitude: '<%= r.dataValues.latitude %>',
        longitude: '<%= r.dataValues.longitude %>',
        tel: '<%= r.dataValues.tel %>',
        restOpen: '<%= r.dataValues.restOpen %>',
        restClosed: '<%= r.dataValues.restClosed %>',
        breakStart: '<%= r.dataValues.breakStart %>',
        breakEnd: '<%= r.dataValues.breakEnd %>',
        image: '<%= r.dataValues.image %>',
        type: 'or'
      };
      openedRestaurant.push(openedRestaurantObject);
    </script>
  <% }); %>
  <% openedCafe.forEach(c => { %>
    <script>
      openedCafeObject = {
        compName:'<%= c.dataValues.compName %>',
        address: '<%= c.dataValues.address %>',
        latitude: '<%= c.dataValues.latitude %>',
        longitude: '<%= c.dataValues.longitude %>',
        tel: '<%= c.dataValues.tel %>',
        cafeOpen: '<%= c.dataValues.cafeOpen %>',
        cafeClosed: '<%= c.dataValues.cafeClosed %>',
        cafeType: '<%= c.dataValues.cafeType %>',
        image: '<%= c.dataValues.image %>',
        type: 'oc'
      };
      openedCafe.push(openedCafeObject);
    </script>
  <% }); %>
  <% if(day == 0){openedHospital.forEach(h => { %>
    <script>
      openedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenSun %>',
        hospitalClosed: '<%= h.dataValues.HospCloseSun %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'oh'
      };
      openedHospital.push(openedHospitalObject);
    </script>
  <% })}else if(day == 1){openedHospital.forEach(h => { %>
    <script>
      openedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenMon %>',
        hospitalClosed: '<%= h.dataValues.HospCloseMon %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'oh'
      };
      openedHospital.push(openedHospitalObject);
    </script>
  <% })}else if(day == 2){openedHospital.forEach(h => { %>
    <script>
      openedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenTue %>',
        hospitalClosed: '<%= h.dataValues.HospCloseTue %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'oh'
      };
      openedHospital.push(openedHospitalObject);
    </script>
  <% })}else if(day == 3){openedHospital.forEach(h => { %>
    <script>
      openedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenWed %>',
        hospitalClosed: '<%= h.dataValues.HospCloseWed %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'oh'
      };
      openedHospital.push(openedHospitalObject);
    </script>
  <% })}else if(day == 4){openedHospital.forEach(h => { %>
    <script>
      openedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenThu %>',
        hospitalClosed: '<%= h.dataValues.HospCloseThu %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'oh'
      };
      openedHospital.push(openedHospitalObject);
    </script>
  <% })}else if(day == 5){openedHospital.forEach(h => { %>
    <script>
      openedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenFri %>',
        hospitalClosed: '<%= h.dataValues.HospCloseFri %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'oh'
      };
      openedHospital.push(openedHospitalObject);
    </script>
  <% })}else if(day == 6){openedHospital.forEach(h => { %>
    <script>
      openedHospitalObject = {
        compName:'<%= h.dataValues.compName %>',
        address: '<%= h.dataValues.address %>',
        latitude: '<%= h.dataValues.latitude %>',
        longitude: '<%= h.dataValues.longitude %>',
        tel: '<%= h.dataValues.tel %>',
        hospitalOpen: '<%= h.dataValues.HospOpenSat %>',
        hospitalClosed: '<%= h.dataValues.HospCloseSat %>',
        image: '<%= h.dataValues.image %>',
        HospType: '<%= h.dataValues.HospType %>',
        content: '<%= h.dataValues.content %>',
        type: 'oh'
      };
      openedHospital.push(openedHospitalObject);
    </script>
  <% })}; %>
  <script src="/javascripts/mapLoader.js"></script>
  <script src="/javascripts/slideNav.js"></script>
</html>
