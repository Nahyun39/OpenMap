<head>
    <title>openMap</title>
</head>

<body>
        <div class="config">
            <form action = "/mypage/config/rest"  method="post" enctype="multipart/form-data">
                <input type="hidden" name="comp_id" value=<%= myRest.compId %> >

                <label for="compName">업체이름</label>
                <br>
                <input name="compName" id="compName" type="text" value = <%= myRest.compName %> disabled >
                <br>
                <label for="addr">도로명주소</label>
                <br>
                <input name="addr" id="addr" type="text" required placeholder=<%= myRest.address %> /disabled >
                <br>
                <label for="telNum">전화번호</label>
                <br>
                <input name="telNum" id="telNum" type="tel" placeholder=<%= myRest.tel %> >
                <br>
                <label for="picture">업체사진</label>
                <br>
                <input name="picture" id="picture" type="file" accept="image/png, image/jpeg" />
                <br>
                <p>외부사진 혹은 내부사진을 업로드 해주세요.</p>
                <div class="leave">
                    <input type='checkbox' name="todayClosed" id="todayClosed" value="true" <% if(myRest.todayClosed){ %> checked <% } %> />오늘휴무
                    <input type='checkbox' name="earlyClosed" id="earlyClosed" value="true" <% if(myRest.earlyClosed){ %> checked <% } %> />조기마감
                    <input type='checkbox' name="vacation" id="vacation" value="true" <% if(myRest.vacation){ %> checked <% } %> />단기휴무
                </div>
                <br>
                <label for="name">정기휴무</label>
                <br>
                <div class="closeDay">
                    <input type='checkbox' name="mon" id="mon" value="true" <% if(myRest.mon){ %> checked <% } %> />월요일
                    <input type='checkbox' name="tue" id="tue" value="true" <% if(myRest.tue){ %> checked <% } %> />화요일
                    <input type='checkbox' name="wed" id="wed" value="true" <% if(myRest.wed){ %> checked <% } %> />수요일
                    <input type='checkbox' name="thu" id="thu" value="true" <% if(myRest.thu){ %> checked <% } %> />목요일
                    <input type='checkbox' name="fri" id="fri" value="true" <% if(myRest.fri){ %> checked <% } %> />금요일
                    <input type='checkbox' name="sat" id="sat" value="true" <% if(myRest.sat){ %> checked <% } %> />토요일
                    <input type='checkbox' name="sun" id="sun" value="true" <% if(myRest.sun){ %> checked <% } %> />일요일
                    <br>
                </div>
                <br>
                <div>
                    <label for="openTime">오픈시각</label>
                    <input type="time" class="timepicker" name="openTime" id="openTime" min="00:00" max="23:59" value=<%= myRest.restOpen %> />
                    <label for="closedTime">마감시각</label>
                    <input type="time" class="timepicker" name="closedTime" id="closedTime" min="00:00" max="23:59" value=<%= myRest.restClosed %> />
                    <input type="checkbox" name="tomorrow" id="tomorrow" value="true" />익일
                    <input type="checkbox" name="24hours" id="24hours" value="true" onclick='get24hoursValue(event)' />24시간 영업
                </div>
                <div>
                    <label for="breakStart">브레이크 시작시각</label>
                    <input type="time" class="timepicker" name="breakStart" id="breakStart" value=<%= myRest.breakStart %> />
                    <label for="breakEnd">브레이크 마감시각</label>
                    <input type="time" class="timepicker" name="breakEnd" id="breakEnd" value=<%= myRest.breakEnd %> />
                    <input type="checkbox" name="noBreak" id="noBreak" value="true" onclick='getNoBreakValue(event)' />브레이크 타임없음
                </div>
                <div>
                    <label for="restType">음식 종류(선택 필수)</label>
                    <select name="restType" , id="restType" required>
                        <option value="">음식종류</option>
                        <option value="한식" <% if(myRest.restType == '한식'){ %> selected <% } %> >한식  </option>
                        <option value="중식"  <% if(myRest.restType == '중식'){ %> selected <% } %> >중식 </option>
                        <option value="일식" <% if(myRest.restType == '일식'){ %> selected <% } %> >일식 </option>
                        <option value="경양식" <% if(myRest.restType == '경양식'){ %> selected <% } %> >경양식 </option>
                        <option value="분식" <% if(myRest.restType == '분식'){ %> selected <% } %> >분식 </option>
                        <option value="고깃집" <% if(myRest.restType == '고깃집'){ %> selected <% } %> >고깃집 </option>
                        <option value="술집" <% if(myRest.restType == '술집'){ %> selected <% } %> >술집 </option>
                        <option value="치킨" <% if(myRest.restType == '치킨'){ %> selected <% } %> >치킨 </option>
                        <option value="기타" <% if(myRest.restType == '기타'){ %> selected <% } %> >기타 </option>
                    </select>
                </div>
        
                <div>
                    <label for="menu">주요메뉴</label>
                    <input type="button" value="메뉴 추가하기" onclick="addMenu()">
                    <br>
                    <div id="menuBox">
                        <% menu.forEach(m => { %> 
                        <div>
                            <input type="text" name="menu" id="menu" placeholder="메뉴명" value=<%= m.menuName%>>
                            <input type="number" name="price" id="price" placeholder="가격" value=<%= m.price%>>원
                        </div>
                        <% }); %>
                    </div>
                    <div id="field"></div>
                </div>
        
                <input type="submit" value="업체 정보 수정하기" />
            </form>
        </div>
</body>


<script>
    function get24hoursValue(event) {
    const openForm = document.getElementById('openTime');
    const closedForm = document.getElementById('closedTime');
    const tomorrowForm = document.getElementById('tomorrow');

        if (event.target.checked) {
            openForm.disabled = true;
            closedForm.disabled = true;
            tomorrowForm.disabled = true;
            tomorrowForm.checked = false;
            document.getElementById('openTime').value="00:00";
            document.getElementById('closedTime').value="23:59";
        } else {
            openForm.disabled = false;
            closedForm.disabled = false;
            tomorrowForm.disabled = false;
        }
    };

    function addMenu(){
    var newMenu = document.createElement('div');
    newMenu.innerHTML = `<input type="text" name="menu" id="menu" placeholder="메뉴명">
                        <input type="number" name="price" id="price" placeholder="가격">원`;
    document.getElementById('menuBox').append(newMenu);
    };

</script>